import{r,h as t,H as n}from"./p-33b9aa6b.js";import{Logger as e,I18n as i}from"@aws-amplify/core";import{M as o,A as a}from"./p-417bb5ea.js";import{Auth as u}from"@aws-amplify/auth";import{T as f}from"./p-26837fd8.js";import{N as s}from"./p-900152ca.js";import{d as c,o as h,a as l}from"./p-639f5cf6.js";import{c as v}from"./p-0cebebfa.js";import d from"buffer";const p=class{constructor(t){r(this,t),this.placeholder="",this.checked=!1,this.disabled=!1}render(){return t("span",{class:"radio-button"},t("input",Object.assign({type:"radio",name:this.name,value:this.value,onInput:this.handleInputChange,placeholder:this.placeholder,id:this.fieldId,checked:this.checked,disabled:this.disabled},this.inputProps)),t("amplify-label",{htmlFor:this.fieldId},this.label))}};p.style=":host{--font-family:var(--amplify-font-family)}.radio-button{display:block;width:100%;padding:16px;font-size:var(--amplify-text-sm);font-family:var(--font-family)}.radio-button input{margin-right:12px}";const w=class{constructor(t){r(this,t),this.message=""}render(){return t("div",{class:"toast"},t("amplify-icon",{class:"toast-icon",name:"warning"}),this.message?t("span",null,this.message):null,t("slot",null),t("button",{class:"toast-close",onClick:this.handleClose}))}};w.style=':host{--background-color:var(--amplify-secondary-tint);--color:var(--amplify-white);--font-size:var(--amplify-text-sm);--font-family:var(--amplify-font-family);--close-icon-color:var(--amplify-white);--close-icon-hover:var(--amplify-red)}.toast-icon{padding-right:5px}.toast{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;position:absolute;top:0;left:0;width:100%;z-index:99;-webkit-box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.3);box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.3);padding:16px;background-color:var(--background-color);font-size:var(--font-size);color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:5px;font-family:var(--font-family)}.toast>span{margin-right:10px}.toast-close{margin-left:auto;-ms-flex-item-align:center;align-self:center;position:relative;width:18px;height:18px;overflow:hidden;cursor:pointer;background:transparent;border:none}.toast-close::before,.toast-close::after{content:"";position:absolute;height:2px;width:100%;top:50%;left:0;margin-top:-1px;background:var(--close-icon-color)}.toast-close:hover::before,.toast-close:hover::after{background:var(--close-icon-hover)}.toast-close::before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.toast-close::after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}';var m=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},g={}.toString,y=Array.isArray||function(r){return"[object Array]"==g.call(r)},b=(E.TYPED_ARRAY_SUPPORT=function(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===r.foo()}catch(t){return!1}}())?2147483647:1073741823;function E(r,t,n){return E.TYPED_ARRAY_SUPPORT||this instanceof E?"number"==typeof r?T(this,r):function(r,t,n,e){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(r,t,n,e){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(e||0))throw new RangeError("'length' is out of bounds");var i;return i=void 0===n&&void 0===e?new Uint8Array(t):void 0===e?new Uint8Array(t,n):new Uint8Array(t,n,e),E.TYPED_ARRAY_SUPPORT?i.__proto__=E.prototype:i=k(r,i),i}(r,t,n,e):"string"==typeof t?function(r,t){var n=0|M(t),e=A(r,n),i=e.write(t);return i!==n&&(e=e.slice(0,i)),e}(r,t):function(r,t){if(E.isBuffer(t)){var n=0|x(t.length),e=A(r,n);return 0===e.length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?A(r,0):k(r,t);if("Buffer"===t.type&&Array.isArray(t.data))return k(r,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(r,t)}(this,r,t,n):new E(r,t,n)}function x(r){if(r>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return 0|r}function A(r,t){var n;return E.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(t)).__proto__=E.prototype:(null===(n=r)&&(n=new E(t)),n.length=t),n}function T(r,t){var n=A(r,t<0?0:0|x(t));if(!E.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)n[e]=0;return n}function k(r,t){for(var n=t.length<0?0:0|x(t.length),e=A(r,n),i=0;i<n;i+=1)e[i]=255&t[i];return e}function R(r,t){var n;t=t||1/0;for(var e=r.length,i=null,o=[],a=0;a<e;++a){if((n=r.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===e){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function M(r){return E.isBuffer(r)?r.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer)?r.byteLength:("string"!=typeof r&&(r=""+r),0===r.length?0:R(r).length)}E.TYPED_ARRAY_SUPPORT&&(E.prototype.__proto__=Uint8Array.prototype,E.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&E[Symbol.species]===E&&Object.defineProperty(E,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),E.prototype.write=function(r,t,n){void 0===t||void 0===n&&"string"==typeof t?(n=this.length,t=0):isFinite(t)&&(t|=0,isFinite(n)?n|=0:n=void 0);var e=this.length-t;if((void 0===n||n>e)&&(n=e),r.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(r,t,n,e){return function(r,t,n,e){for(var i=0;i<e&&!(i+n>=t.length||i>=r.length);++i)t[i+n]=r[i];return i}(R(t,r.length-n),r,n,e)}(this,r,t,n)},E.prototype.slice=function(r,t){var n,e=this.length;if((r=~~r)<0?(r+=e)<0&&(r=0):r>e&&(r=e),(t=void 0===t?e:~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),t<r&&(t=r),E.TYPED_ARRAY_SUPPORT)(n=this.subarray(r,t)).__proto__=E.prototype;else{var i=t-r;n=new E(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+r]}return n},E.prototype.copy=function(r,t,n,e){if(n||(n=0),e||0===e||(e=this.length),t>=r.length&&(t=r.length),t||(t=0),e>0&&e<n&&(e=n),e===n)return 0;if(0===r.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(e<0)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),r.length-t<e-n&&(e=r.length-t+n);var i,o=e-n;if(this===r&&n<t&&t<e)for(i=o-1;i>=0;--i)r[i+t]=this[i+n];else if(o<1e3||!E.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)r[i+t]=this[i+n];else Uint8Array.prototype.set.call(r,this.subarray(n,n+o),t);return o},E.prototype.fill=function(r,t,n){if("string"==typeof r){if("string"==typeof t?(t=0,n=this.length):"string"==typeof n&&(n=this.length),1===r.length){var e=r.charCodeAt(0);e<256&&(r=e)}}else"number"==typeof r&&(r&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,r||(r=0),"number"==typeof r)for(i=t;i<n;++i)this[i]=r;else{var o=E.isBuffer(r)?r:new E(r),a=o.length;for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this},E.concat=function(r,t){if(!y(r))throw new TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return A(null,0);var n;if(void 0===t)for(t=0,n=0;n<r.length;++n)t+=r[n].length;var e=T(null,t),i=0;for(n=0;n<r.length;++n){var o=r[n];if(!E.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(e,i),i+=o.length}return e},E.byteLength=M,E.prototype._isBuffer=!0,E.isBuffer=function(r){return!(null==r||!r._isBuffer)};var B,I=function(r){var t=new E(r);return t.fill(0),t},C=function(r){return new E(r)},N=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],P=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return 4*r+17},F=function(r){return N[r]},U=function(r){for(var t=0;0!==r;)t++,r>>>=1;return t},_=function(){return void 0!==B},j=function(r){return B(r)};function S(r,t,n){return r(n={path:t,exports:{},require:function(){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}var z=S((function(r,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(r){return r&&void 0!==r.bit&&r.bit>=0&&r.bit<4},t.from=function(r,n){if(t.isValid(r))return r;try{return function(r){if("string"!=typeof r)throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}(r)}catch(e){return n}}}));function $(){this.buffer=[],this.length=0}$.prototype={get:function(r){var t=Math.floor(r/8);return 1==(this.buffer[t]>>>7-r%8&1)},put:function(r,t){for(var n=0;n<t;n++)this.putBit(1==(r>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(r){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),r&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var O=$;function L(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=I(r*r),this.reservedBit=I(r*r)}L.prototype.set=function(r,t,n,e){var i=r*this.size+t;this.data[i]=n,e&&(this.reservedBit[i]=!0)},L.prototype.get=function(r,t){return this.data[r*this.size+t]},L.prototype.xor=function(r,t,n){this.data[r*this.size+t]^=n},L.prototype.isReserved=function(r,t){return this.reservedBit[r*this.size+t]};var Q=L,q=S((function(r,t){var n=P;t.getRowColCoords=function(r){if(1===r)return[];for(var t=Math.floor(r/7)+2,e=n(r),i=145===e?26:2*Math.ceil((e-13)/(2*t-2)),o=[e-7],a=1;a<t-1;a++)o[a]=o[a-1]-i;return o.push(6),o.reverse()},t.getPositions=function(r){for(var n=[],e=t.getRowColCoords(r),i=e.length,o=0;o<i;o++)for(var a=0;a<i;a++)0===o&&0===a||0===o&&a===i-1||o===i-1&&0===a||n.push([e[o],e[a]]);return n}})),D=P,J=S((function(r,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(r,n,e){switch(r){case t.Patterns.PATTERN000:return(n+e)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return e%3==0;case t.Patterns.PATTERN011:return(n+e)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(e/3))%2==0;case t.Patterns.PATTERN101:return n*e%2+n*e%3==0;case t.Patterns.PATTERN110:return(n*e%2+n*e%3)%2==0;case t.Patterns.PATTERN111:return(n*e%3+(n+e)%2)%2==0;default:throw new Error("bad maskPattern:"+r)}}t.isValid=function(r){return null!=r&&""!==r&&!isNaN(r)&&r>=0&&r<=7},t.from=function(r){return t.isValid(r)?parseInt(r,10):void 0},t.getPenaltyN1=function(r){for(var t=r.size,n=0,e=0,i=0,o=null,a=null,u=0;u<t;u++){e=i=0,o=a=null;for(var f=0;f<t;f++){var s=r.get(u,f);s===o?e++:(e>=5&&(n+=e-5+3),o=s,e=1),(s=r.get(f,u))===a?i++:(i>=5&&(n+=i-5+3),a=s,i=1)}e>=5&&(n+=e-5+3),i>=5&&(n+=i-5+3)}return n},t.getPenaltyN2=function(r){for(var t=r.size,n=0,e=0;e<t-1;e++)for(var i=0;i<t-1;i++){var o=r.get(e,i)+r.get(e,i+1)+r.get(e+1,i)+r.get(e+1,i+1);4!==o&&0!==o||n++}return 3*n},t.getPenaltyN3=function(r){for(var t=r.size,n=0,e=0,i=0,o=0;o<t;o++){e=i=0;for(var a=0;a<t;a++)e=e<<1&2047|r.get(o,a),a>=10&&(1488===e||93===e)&&n++,i=i<<1&2047|r.get(a,o),a>=10&&(1488===i||93===i)&&n++}return 40*n},t.getPenaltyN4=function(r){for(var t=0,n=r.data.length,e=0;e<n;e++)t+=r.data[e];return 10*Math.abs(Math.ceil(100*t/n/5)-10)},t.applyMask=function(r,t){for(var e=t.size,i=0;i<e;i++)for(var o=0;o<e;o++)t.isReserved(o,i)||t.xor(o,i,n(r,o,i))},t.getBestMask=function(r,n){for(var e=Object.keys(t.Patterns).length,i=0,o=1/0,a=0;a<e;a++){n(a),t.applyMask(a,r);var u=t.getPenaltyN1(r)+t.getPenaltyN2(r)+t.getPenaltyN3(r)+t.getPenaltyN4(r);t.applyMask(a,r),u<o&&(o=u,i=a)}return i}})),K=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Z=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430],H=function(r,t){switch(t){case z.L:return K[4*(r-1)+0];case z.M:return K[4*(r-1)+1];case z.Q:return K[4*(r-1)+2];case z.H:return K[4*(r-1)+3];default:return}},Y=function(r,t){switch(t){case z.L:return Z[4*(r-1)+0];case z.M:return Z[4*(r-1)+1];case z.Q:return Z[4*(r-1)+2];case z.H:return Z[4*(r-1)+3];default:return}},W=I(512),G=I(256);!function(){for(var r=1,t=0;t<255;t++)W[t]=r,G[r]=t,256&(r<<=1)&&(r^=285);for(t=255;t<512;t++)W[t]=W[t-255]}();var V=function(r,t){return 0===r||0===t?0:W[G[r]+G[t]]},X=S((function(r,t){t.mul=function(r,t){for(var n=I(r.length+t.length-1),e=0;e<r.length;e++)for(var i=0;i<t.length;i++)n[e+i]^=V(r[e],t[i]);return n},t.mod=function(r,t){for(var n=C(r);n.length-t.length>=0;){for(var e=n[0],i=0;i<t.length;i++)n[i]^=V(t[i],e);for(var o=0;o<n.length&&0===n[o];)o++;n=n.slice(o)}return n},t.generateECPolynomial=function(r){for(var n=C([1]),e=0;e<r;e++)n=t.mul(n,[1,(i=e,W[i])]);var i;return n}})),rr=d.Buffer;function tr(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}tr.prototype.initialize=function(r){this.degree=r,this.genPoly=X.generateECPolynomial(this.degree)},tr.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");var t=I(this.degree),n=rr.concat([r,t],r.length+this.degree),e=X.mod(n,this.genPoly),i=this.degree-e.length;if(i>0){var o=I(this.degree);return e.copy(o,i),o}return e};var nr=tr,er=function(r){return!isNaN(r)&&r>=1&&r<=40},ir="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",or="(?:(?![A-Z0-9 $%*+\\-./:]|"+(ir=ir.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+",ar=new RegExp(ir,"g"),ur=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),fr=new RegExp(or,"g"),sr=new RegExp("[0-9]+","g"),cr=new RegExp("[A-Z $%*+\\-./:]+","g"),hr=new RegExp("^"+ir+"$"),lr=new RegExp("^[0-9]+$"),vr=new RegExp("^[A-Z0-9 $%*+\\-./:]+$"),dr={KANJI:ar,BYTE_KANJI:ur,BYTE:fr,NUMERIC:sr,ALPHANUMERIC:cr,testKanji:function(r){return hr.test(r)},testNumeric:function(r){return lr.test(r)},testAlphanumeric:function(r){return vr.test(r)}},pr=S((function(r,t){t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(r,t){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!er(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?r.ccBits[0]:t<27?r.ccBits[1]:r.ccBits[2]},t.getBestModeForData=function(r){return dr.testNumeric(r)?t.NUMERIC:dr.testAlphanumeric(r)?t.ALPHANUMERIC:dr.testKanji(r)?t.KANJI:t.BYTE},t.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},t.isValid=function(r){return r&&r.bit&&r.ccBits},t.from=function(r,n){if(t.isValid(r))return r;try{return function(r){if("string"!=typeof r)throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+r)}}(r)}catch(e){return n}}})),wr=S((function(r,t){var n=U(7973);function e(r,t){return pr.getCharCountIndicator(r,t)+4}function i(r,t){var n=0;return r.forEach((function(r){var i=e(r.mode,t);n+=i+r.getBitsLength()})),n}t.from=function(r,t){return er(r)?parseInt(r,10):t},t.getCapacity=function(r,t,n){if(!er(r))throw new Error("Invalid QR Code version");void 0===n&&(n=pr.BYTE);var i=8*(F(r)-Y(r,t));if(n===pr.MIXED)return i;var o=i-e(n,r);switch(n){case pr.NUMERIC:return Math.floor(o/10*3);case pr.ALPHANUMERIC:return Math.floor(o/11*2);case pr.KANJI:return Math.floor(o/13);case pr.BYTE:default:return Math.floor(o/8)}},t.getBestVersionForData=function(r,n){var e,o=z.from(n,z.M);if(y(r)){if(r.length>1)return function(r,n){for(var e=1;e<=40;e++)if(i(r,e)<=t.getCapacity(e,n,pr.MIXED))return e}(r,o);if(0===r.length)return 1;e=r[0]}else e=r;return function(r,n,e){for(var i=1;i<=40;i++)if(n<=t.getCapacity(i,e,r))return i}(e.mode,e.getLength(),o)},t.getEncodedBits=function(r){if(!er(r)||r<7)throw new Error("Invalid QR Code version");for(var t=r<<12;U(t)-n>=0;)t^=7973<<U(t)-n;return r<<12|t}})),mr=U(1335);function gr(r){this.mode=pr.NUMERIC,this.data=r.toString()}gr.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},gr.prototype.getLength=function(){return this.data.length},gr.prototype.getBitsLength=function(){return gr.getBitsLength(this.data.length)},gr.prototype.write=function(r){var t,n,e;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),e=parseInt(n,10),r.put(e,10);var i=this.data.length-t;i>0&&(n=this.data.substr(t),e=parseInt(n,10),r.put(e,3*i+1))};var yr=gr,br=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Er(r){this.mode=pr.ALPHANUMERIC,this.data=r}Er.getBitsLength=function(r){return 11*Math.floor(r/2)+r%2*6},Er.prototype.getLength=function(){return this.data.length},Er.prototype.getBitsLength=function(){return Er.getBitsLength(this.data.length)},Er.prototype.write=function(r){var t;for(t=0;t+2<=this.data.length;t+=2){var n=45*br.indexOf(this.data[t]);n+=br.indexOf(this.data[t+1]),r.put(n,11)}this.data.length%2&&r.put(br.indexOf(this.data[t]),6)};var xr=Er;function Ar(r){this.mode=pr.BYTE,this.data=C(r)}Ar.getBitsLength=function(r){return 8*r},Ar.prototype.getLength=function(){return this.data.length},Ar.prototype.getBitsLength=function(){return Ar.getBitsLength(this.data.length)},Ar.prototype.write=function(r){for(var t=0,n=this.data.length;t<n;t++)r.put(this.data[t],8)};var Tr=Ar;function kr(r){this.mode=pr.KANJI,this.data=r}kr.getBitsLength=function(r){return 13*r},kr.prototype.getLength=function(){return this.data.length},kr.prototype.getBitsLength=function(){return kr.getBitsLength(this.data.length)},kr.prototype.write=function(r){var t;for(t=0;t<this.data.length;t++){var n=j(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}r.put(n=192*(n>>>8&255)+(255&n),13)}};var Rr=kr,Mr=S((function(r){var t={single_source_shortest_paths:function(r,n,e){var i={},o={};o[n]=0;var a,u,f,s,c,h,l=t.PriorityQueue.make();for(l.push(n,0);!l.empty();)for(f in s=(a=l.pop()).cost,c=r[u=a.value]||{})c.hasOwnProperty(f)&&(h=s+c[f],(void 0===o[f]||o[f]>h)&&(o[f]=h,l.push(f,h),i[f]=u));if(void 0!==e&&void 0===o[e]){var v=["Could not find a path from ",n," to ",e,"."].join("");throw new Error(v)}return i},extract_shortest_path_from_predecessor_list:function(r,t){for(var n=[],e=t;e;)n.push(e),e=r[e];return n.reverse(),n},find_path:function(r,n,e){var i=t.single_source_shortest_paths(r,n,e);return t.extract_shortest_path_from_predecessor_list(i,e)},PriorityQueue:{make:function(r){var n,e=t.PriorityQueue,i={};for(n in r=r||{},e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i.queue=[],i.sorter=r.sorter||e.default_sorter,i},default_sorter:function(r,t){return r.cost-t.cost},push:function(r,t){this.queue.push({value:r,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};r.exports=t})),Br=S((function(r,t){function n(r){return unescape(encodeURIComponent(r)).length}function e(r,t,n){for(var e,i=[];null!==(e=r.exec(n));)i.push({data:e[0],index:e.index,mode:t,length:e[0].length});return i}function i(r){var t,n,i=e(dr.NUMERIC,pr.NUMERIC,r),o=e(dr.ALPHANUMERIC,pr.ALPHANUMERIC,r);return _()?(t=e(dr.BYTE,pr.BYTE,r),n=e(dr.KANJI,pr.KANJI,r)):(t=e(dr.BYTE_KANJI,pr.BYTE,r),n=[]),i.concat(o,t,n).sort((function(r,t){return r.index-t.index})).map((function(r){return{data:r.data,mode:r.mode,length:r.length}}))}function o(r,t){switch(t){case pr.NUMERIC:return yr.getBitsLength(r);case pr.ALPHANUMERIC:return xr.getBitsLength(r);case pr.KANJI:return Rr.getBitsLength(r);case pr.BYTE:return Tr.getBitsLength(r)}}function a(r,t){var n,e=pr.getBestModeForData(r);if((n=pr.from(t,e))!==pr.BYTE&&n.bit<e.bit)throw new Error('"'+r+'" cannot be encoded with mode '+pr.toString(n)+".\n Suggested mode is: "+pr.toString(e));switch(n!==pr.KANJI||_()||(n=pr.BYTE),n){case pr.NUMERIC:return new yr(r);case pr.ALPHANUMERIC:return new xr(r);case pr.KANJI:return new Rr(r);case pr.BYTE:return new Tr(r)}}t.fromArray=function(r){return r.reduce((function(r,t){return"string"==typeof t?r.push(a(t,null)):t.data&&r.push(a(t.data,t.mode)),r}),[])},t.fromString=function(r,e){for(var a=function(r,t){for(var n={},e={start:{}},i=["start"],a=0;a<r.length;a++){for(var u=r[a],f=[],s=0;s<u.length;s++){var c=u[s],h=""+a+s;f.push(h),n[h]={node:c,lastCount:0},e[h]={};for(var l=0;l<i.length;l++){var v=i[l];n[v]&&n[v].node.mode===c.mode?(e[v][h]=o(n[v].lastCount+c.length,c.mode)-o(n[v].lastCount,c.mode),n[v].lastCount+=c.length):(n[v]&&(n[v].lastCount=c.length),e[v][h]=o(c.length,c.mode)+4+pr.getCharCountIndicator(c.mode,t))}}i=f}for(l=0;l<i.length;l++)e[i[l]].end=0;return{map:e,table:n}}(function(r){for(var t=[],e=0;e<r.length;e++){var i=r[e];switch(i.mode){case pr.NUMERIC:t.push([i,{data:i.data,mode:pr.ALPHANUMERIC,length:i.length},{data:i.data,mode:pr.BYTE,length:i.length}]);break;case pr.ALPHANUMERIC:t.push([i,{data:i.data,mode:pr.BYTE,length:i.length}]);break;case pr.KANJI:t.push([i,{data:i.data,mode:pr.BYTE,length:n(i.data)}]);break;case pr.BYTE:t.push([{data:i.data,mode:pr.BYTE,length:n(i.data)}])}}return t}(i(r,_())),e),u=Mr.find_path(a.map,"start","end"),f=[],s=1;s<u.length-1;s++)f.push(a.table[u[s]].node);return t.fromArray(f.reduce((function(r,t){var n=r.length-1>=0?r[r.length-1]:null;return n&&n.mode===t.mode?(r[r.length-1].data+=t.data,r):(r.push(t),r)}),[]))},t.rawSplit=function(r){return t.fromArray(i(r,_()))}}));function Ir(r,t,n){var e,i,o=r.size,a=function(r,t){for(var n=r.bit<<3|t,e=n<<10;U(e)-mr>=0;)e^=1335<<U(e)-mr;return 21522^(n<<10|e)}(t,n);for(e=0;e<15;e++)r.set(e<6?e:e<8?e+1:o-15+e,8,i=1==(a>>e&1),!0),r.set(8,e<8?o-e-1:e<9?15-e-1+1:15-e-1,i,!0);r.set(o-8,8,1,!0)}function Cr(r,t,n,e){var i;if(y(r))i=Br.fromArray(r);else{if("string"!=typeof r)throw new Error("Invalid data");var o=t;if(!o){var a=Br.rawSplit(r);o=wr.getBestVersionForData(a,n)}i=Br.fromString(r,o||40)}var u=wr.getBestVersionForData(i,n);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<u)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+u+".\n")}else t=u;var f=function(r,t,n){var e=new O;n.forEach((function(t){e.put(t.mode.bit,4),e.put(t.getLength(),pr.getCharCountIndicator(t.mode,r)),t.write(e)}));var i=8*(F(r)-Y(r,t));for(e.getLengthInBits()+4<=i&&e.put(0,4);e.getLengthInBits()%8!=0;)e.putBit(0);for(var o=(i-e.getLengthInBits())/8,a=0;a<o;a++)e.put(a%2?17:236,8);return function(r,t,n){for(var e=F(t),i=e-Y(t,n),o=H(t,n),a=o-e%o,u=Math.floor(e/o),f=Math.floor(i/o),s=f+1,c=u-f,h=new nr(c),l=0,v=new Array(o),d=new Array(o),p=0,w=C(r.buffer),m=0;m<o;m++){var g=m<a?f:s;v[m]=w.slice(l,l+g),d[m]=h.encode(v[m]),l+=g,p=Math.max(p,g)}var y,b,E=I(e),x=0;for(y=0;y<p;y++)for(b=0;b<o;b++)y<v[b].length&&(E[x++]=v[b][y]);for(y=0;y<c;y++)for(b=0;b<o;b++)E[x++]=d[b][y];return E}(e,r,t)}(t,n,i),s=P(t),c=new Q(s);return function(r,t){for(var n=r.size,e=function(r){var t=D(r);return[[0,0],[t-7,0],[0,t-7]]}(t),i=0;i<e.length;i++)for(var o=e[i][0],a=e[i][1],u=-1;u<=7;u++)if(!(o+u<=-1||n<=o+u))for(var f=-1;f<=7;f++)a+f<=-1||n<=a+f||r.set(o+u,a+f,u>=0&&u<=6&&(0===f||6===f)||f>=0&&f<=6&&(0===u||6===u)||u>=2&&u<=4&&f>=2&&f<=4,!0)}(c,t),function(r){for(var t=r.size,n=8;n<t-8;n++){var e=n%2==0;r.set(n,6,e,!0),r.set(6,n,e,!0)}}(c),function(r,t){for(var n=q.getPositions(t),e=0;e<n.length;e++)for(var i=n[e][0],o=n[e][1],a=-2;a<=2;a++)for(var u=-2;u<=2;u++)r.set(i+a,o+u,-2===a||2===a||-2===u||2===u||0===a&&0===u,!0)}(c,t),Ir(c,n,0),t>=7&&function(r,t){for(var n,e,i,o=r.size,a=wr.getEncodedBits(t),u=0;u<18;u++)n=Math.floor(u/3),r.set(n,e=u%3+o-8-3,i=1==(a>>u&1),!0),r.set(e,n,i,!0)}(c,t),function(r,t){for(var n=r.size,e=-1,i=n-1,o=7,a=0,u=n-1;u>0;u-=2)for(6===u&&u--;;){for(var f=0;f<2;f++)if(!r.isReserved(i,u-f)){var s=!1;a<t.length&&(s=1==(t[a]>>>o&1)),r.set(i,u-f,s),-1==--o&&(a++,o=7)}if((i+=e)<0||n<=i){i-=e,e=-e;break}}}(c,f),isNaN(e)&&(e=J.getBestMask(c,Ir.bind(null,c,n))),J.applyMask(e,c),Ir(c,n,e),{modules:c,version:t,errorCorrectionLevel:n,maskPattern:e,segments:i}}var Nr=function(r,t){if(void 0===r||""===r)throw new Error("No input text");var n,e,i=z.M;return void 0!==t&&(i=z.from(t.errorCorrectionLevel,z.M),n=wr.from(t.version),e=J.from(t.maskPattern),t.toSJISFunc&&function(r){if("function"!=typeof r)throw new Error('"toSJISFunc" is not a valid function.');B=r}(t.toSJISFunc)),Cr(r,n,i,e)},Pr=S((function(r,t){function n(r){if("number"==typeof r&&(r=r.toString()),"string"!=typeof r)throw new Error("Color should be defined as hex string");var t=r.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+r);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(r){return[r,r]})))),6===t.length&&t.push("F","F");var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});var t=r.width&&r.width>=21?r.width:void 0;return{width:t,scale:t?4:r.scale||4,margin:null==r.margin||r.margin<0?4:r.margin,color:{dark:n(r.color.dark||"#000000ff"),light:n(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,t){return t.width&&t.width>=r+2*t.margin?t.width/(r+2*t.margin):t.scale},t.getImageWidth=function(r,n){var e=t.getScale(r,n);return Math.floor((r+2*n.margin)*e)},t.qrToImageData=function(r,n,e){for(var i=n.modules.size,o=n.modules.data,a=t.getScale(i,e),u=Math.floor((i+2*e.margin)*a),f=e.margin*a,s=[e.color.light,e.color.dark],c=0;c<u;c++)for(var h=0;h<u;h++){var l=4*(c*u+h),v=e.color.light;c>=f&&h>=f&&c<u-f&&h<u-f&&(v=s[o[Math.floor((c-f)/a)*i+Math.floor((h-f)/a)]?1:0]),r[l++]=v.r,r[l++]=v.g,r[l++]=v.b,r[l]=v.a}}})),Fr=S((function(r,t){t.render=function(r,t,n){var e=n,i=t;void 0!==e||t&&t.getContext||(e=t,t=void 0),t||(i=function(){try{return document.createElement("canvas")}catch(r){throw new Error("You need to specify a canvas element")}}()),e=Pr.getOptions(e);var o=Pr.getImageWidth(r.modules.size,e),a=i.getContext("2d"),u=a.createImageData(o,o);return Pr.qrToImageData(u.data,r,e),function(r,t,n){r.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(a,i,o),a.putImageData(u,0,0),i},t.renderToDataURL=function(r,n,e){var i=e;return void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={}),t.render(r,n,i).toDataURL(i.type||"image/png",(i.rendererOpts||{}).quality)}}));function Ur(r,t){var n=r.a/255,e=t+'="'+r.hex+'"';return n<1?e+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':e}function _r(r,t,n){var e=r+t;return void 0!==n&&(e+=" "+n),e}function jr(r,t,n,e,i){var o=[].slice.call(arguments,1),a=o.length,u="function"==typeof o[a-1];if(!u&&!m())throw new Error("Callback required as last argument");if(!u){if(a<1)throw new Error("Too few arguments provided");return 1===a?(n=t,t=e=void 0):2!==a||t.getContext||(e=n,n=t,t=void 0),new Promise((function(i,o){try{var a=Nr(n,e);i(r(a,t,e))}catch(u){o(u)}}))}if(a<2)throw new Error("Too few arguments provided");2===a?(i=n,n=t,t=e=void 0):3===a&&(t.getContext&&void 0===i?(i=e,e=void 0):(i=e,e=n,n=t,t=void 0));try{var f=Nr(n,e);i(null,r(f,t,e))}catch(s){i(s)}}var Sr={create:Nr,toCanvas:jr.bind(null,Fr.render),toDataURL:jr.bind(null,Fr.renderToDataURL),toString:jr.bind(null,(function(r,t,n){return function(r,t,n){var e=Pr.getOptions(t),i=r.modules.size,o=r.modules.data,a=i+2*e.margin,u=e.color.light.a?"<path "+Ur(e.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",f="<path "+Ur(e.color.dark,"stroke")+' d="'+function(r,t,n){for(var e="",i=0,o=!1,a=0,u=0;u<r.length;u++){var f=Math.floor(u%t),s=Math.floor(u/t);f||o||(o=!0),r[u]?(a++,u>0&&f>0&&r[u-1]||(e+=o?_r("M",f+n,.5+s+n):_r("m",i,0),i=0,o=!1),f+1<t&&r[u+1]||(e+=_r("h",a),a=0)):i++}return e}(o,i,e.margin)+'"/>',s='<svg xmlns="http://www.w3.org/2000/svg" '+(e.width?'width="'+e.width+'" height="'+e.width+'" ':"")+'viewBox="0 0 '+a+" "+a+'" shape-rendering="crispEdges">'+u+f+"</svg>\n";return"function"==typeof n&&n(null,s),s}(r,n)}))};const zr=new e("TOTP"),$r=class{constructor(t){r(this,t),this.inputProps={autoFocus:!0},this.handleAuthStateChange=c,this.headerText=f.TOTP_HEADER_TEXT,this.issuer=f.TOTP_ISSUER,this.handleComplete=this.onTOTPEvent,this.standalone=!1,this.code=null,this.setupMessage=null,this.qrCodeInput=null,this.loading=!1}async componentWillLoad(){this.standalone||(this.removeHubListener=h(r=>{r===a.TOTPSetup&&this.setup()})),await this.setup()}handleUserChange(){this.standalone&&this.setup()}disconnectedCallback(){this.removeHubListener&&this.removeHubListener()}buildOtpAuthPath(r,t,n){return`otpauth://totp/${t}:${r.username}?secret=${n}&issuer=${t}`}async onTOTPEvent(r){zr.debug("on totp event"),await v(r,this.handleAuthStateChange)}handleTotpInputChange(r){this.setupMessage=null,this.qrCodeInput=r.target.value}async generateQRCode(r){try{this.qrCodeImageSource=await Sr.toDataURL(r)}catch(t){l(t)}}async setup(){if(this.code||this.loading)return void zr.debug("setup was attempted while another is in progress, skipping setup.");if(!this.user||!this.user.associateSoftwareToken)return void zr.debug("setup was attempted with invalid `user`, skipping setup.",this.user);if(!u||"function"!=typeof u.setupTOTP)throw new Error(s);this.setupMessage=null;const r=encodeURI(i.get(this.issuer));this.loading=!0;try{const t=await u.setupTOTP(this.user);zr.debug("secret key",t),this.code=this.buildOtpAuthPath(this.user,r,t),this.generateQRCode(this.code)}catch(t){l(t),zr.debug(i.get(f.TOTP_SETUP_FAILURE),t)}finally{this.loading=!1}}async verifyTotpToken(r){if(r&&r.preventDefault(),!this.qrCodeInput)return void zr.debug("No TOTP Code provided");const t=this.user;if(!u||"function"!=typeof u.verifyTotpToken||"function"!=typeof u.setPreferredMFA)throw new Error(s);try{await u.verifyTotpToken(t,this.qrCodeInput),await u.setPreferredMFA(t,o.TOTP),this.setupMessage=i.get(f.TOTP_SUCCESS_MESSAGE),zr.debug(i.get(f.TOTP_SUCCESS_MESSAGE)),await this.handleComplete(t)}catch(n){this.setupMessage=i.get(f.TOTP_SETUP_FAILURE),zr.error(n)}}render(){return t(n,null,t("amplify-form-section",{headerText:i.get(this.headerText),submitButtonText:i.get(f.TOTP_SUBMIT_BUTTON_TEXT),handleSubmit:r=>this.verifyTotpToken(r),loading:this.loading},t("div",{class:"totp-setup"},this.qrCodeImageSource&&t("img",{src:this.qrCodeImageSource,alt:i.get(f.QR_CODE_ALT)}),t("amplify-form-field",{label:i.get(f.TOTP_LABEL),inputProps:this.inputProps,fieldId:"totpCode",name:"totpCode",handleInputChange:r=>this.handleTotpInputChange(r)}))))}static get watchers(){return{user:["handleUserChange"]}}};$r.style=".totp-setup{text-align:center;margin-bottom:30px}.totp-setup img{height:128px;width:128px}";export{p as amplify_radio_button,w as amplify_toast,$r as amplify_totp_setup}