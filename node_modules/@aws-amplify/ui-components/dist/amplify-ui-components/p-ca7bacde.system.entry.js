var __awaiter=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r["throw"](e))}catch(t){s(t)}}function u(e){e.done?n(e.value):i(e.value).then(a,o)}u((r=r.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(s=a[0]&2?i["return"]:a[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;if(i=0,s)a=[a[0]&2,s.value];switch(a[0]){case 0:case 1:s=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;i=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){n.label=a[1];break}if(a[0]===6&&n.label<s[1]){n.label=s[1];s=a;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(a);break}if(s[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(o){a=[6,o];i=0}finally{r=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r};System.register(["./p-38e49dbf.system.js","@aws-amplify/core","./p-74bf56f1.system.js","@aws-amplify/auth","./p-239ad290.system.js","./p-edf8f59e.system.js","./p-2933db11.system.js","./p-24097013.system.js"],(function(e){"use strict";var t,n,r,i,s,a,o,u,l,h,d,p,f,c,m,g,b,y,_,F,w,v,C,A,I,S;return{setters:[function(e){t=e.r;n=e.h;r=e.H},function(e){i=e.I18n;s=e.Logger;a=e.ConsoleLogger;o=e.isEmpty},function(e){u=e.M;l=e.C;h=e.A;d=e.a;p=e.U},function(e){f=e.Auth},function(e){c=e.T},function(e){m=e.N;g=e.g;b=e.b},function(e){y=e.d;_=e.a;F=e.c;w=e.i;v=e.h;C=e.b;A=e.g},function(e){I=e.c;S=e.h}],execute:function(){var E=e("amplify_confirm_sign_in",function(){function e(e){var n=this;t(this,e);this.handleSubmit=function(e){return n.confirm(e)};this.headerText=c.CONFIRM_SMS_CODE;this.submitButtonText=c.CONFIRM;this.handleAuthStateChange=y;this.defaultFormFields=[{type:"code",required:true,handleInputChange:function(e){return n.handleCodeChange(e)}}];this.formFields=this.defaultFormFields;this.mfaOption=u.SMS;this.loading=false}e.prototype.componentWillLoad=function(){this.setup()};e.prototype.userHandler=function(){this.setup()};e.prototype.setup=function(){if(this.user&&this.user["challengeName"]===l.SoftwareTokenMFA){this.mfaOption=u.TOTP;if(this.headerText===c.CONFIRM_SMS_CODE){this.headerText=c.CONFIRM_TOTP_CODE}}this.constructedFormFieldOptions=this.constructFormFieldOptions(this.formFields)};e.prototype.handleCodeChange=function(e){this.code=e.target.value};e.prototype.confirm=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(r){switch(r.label){case 0:if(e){e.preventDefault()}t=this.user["challengeName"]===l.SoftwareTokenMFA?l.SoftwareTokenMFA:null;if(!f||typeof f.confirmSignIn!=="function"){throw new Error(m)}this.loading=true;r.label=1;case 1:r.trys.push([1,4,5,6]);return[4,f.confirmSignIn(this.user,this.code,t)];case 2:r.sent();return[4,I(this.user,this.handleAuthStateChange)];case 3:r.sent();return[3,6];case 4:n=r.sent();_(n);return[3,6];case 5:this.loading=false;return[7];case 6:return[2]}}))}))};e.prototype.constructFormFieldOptions=function(e){var t=this;var n=[];if(e===undefined)return undefined;if(e.length<=0)return this.defaultFormFields;e.forEach((function(e){if(typeof e==="string"||e.type!=="code"){n.push(e)}else{n.push(Object.assign({handleInputChange:function(e){return t.handleCodeChange(e)}},e))}}));return n};e.prototype.render=function(){var e=this;return n(r,null,n("amplify-form-section",{headerText:i.get(this.headerText),handleSubmit:this.handleSubmit,submitButtonText:i.get(this.submitButtonText),loading:this.loading,secondaryFooterContent:n("span",null,n("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(h.SignIn)}},i.get(c.BACK_TO_SIGN_IN)))},n("amplify-auth-fields",{formFields:this.constructedFormFieldOptions})))};Object.defineProperty(e,"watchers",{get:function(){return{user:["userHandler"]}},enumerable:false,configurable:true});return e}());var T=e("amplify_confirm_sign_up",function(){function e(e){var n=this;t(this,e);this.handleSubmit=function(e){return n.confirmSignUp(e)};this.headerText=c.CONFIRM_SIGN_UP_HEADER_TEXT;this.submitButtonText=c.CONFIRM_SIGN_UP_SUBMIT_BUTTON_TEXT;this.formFields=[];this.handleAuthStateChange=y;this.usernameAlias="username";this.loading=false;this.newFormFields=[];this.phoneNumber={countryDialCodeValue:g,phoneNumberValue:null}}e.prototype.componentWillLoad=function(){this.setup()};e.prototype.formFieldsHandler=function(){this.buildFormFields()};e.prototype.userHandler=function(){this.setup()};e.prototype.setup=function(){this.userInput=this.user&&this.user.username;this._signUpAttrs=this.user&&this.user.signUpAttrs;F(this.usernameAlias);this.buildFormFields()};e.prototype.buildDefaultFormFields=function(){var e=this;this.newFormFields=[{type:""+this.usernameAlias,required:true,handleInputChange:this.handleFormFieldInputChange(""+this.usernameAlias),value:this.userInput,disabled:this.userInput?true:false,inputProps:{autocomplete:"username"}},{type:"code",label:i.get(c.CONFIRM_SIGN_UP_CODE_LABEL),placeholder:i.get(c.CONFIRM_SIGN_UP_CODE_PLACEHOLDER),required:true,hint:n("div",null,i.get(c.CONFIRM_SIGN_UP_LOST_CODE)," ",n("amplify-button",{variant:"anchor",onClick:function(){return e.resendConfirmCode()}},i.get(c.CONFIRM_SIGN_UP_RESEND_CODE))),handleInputChange:this.handleFormFieldInputChange("code")}]};e.prototype.buildFormFields=function(){var e=this;if(this.formFields.length===0){this.buildDefaultFormFields()}else{var t=[];this.formFields.forEach((function(r){var s=Object.assign({},r);if(s.type==="code"){s["hint"]=w(s)?n("div",null,i.get(c.CONFIRM_SIGN_UP_LOST_CODE)," ",n("amplify-button",{variant:"anchor",onClick:function(){return e.resendConfirmCode()}},i.get(c.CONFIRM_SIGN_UP_RESEND_CODE))):s["hint"]}s["handleInputChange"]=function(t){return e.handleFormFieldInputWithCallback(t,r)};t.push(s)}));this.newFormFields=t}};e.prototype.handleFormFieldInputChange=function(e){var t=this;switch(e){case"username":case"email":return function(e){return t.userInput=e.target.value};case"phone_number":return function(e){return v(e,t.phoneNumber)};case"code":return function(e){return t.code=e.target.value};default:return}};e.prototype.setFieldValue=function(e){switch(e.type){case"username":case"email":if(e.value===undefined){this.userInput=""}else{this.userInput=e.value}break;case"phone_number":if(e.dialCode){this.phoneNumber.countryDialCodeValue=e.dialCode}this.phoneNumber.phoneNumberValue=e.value;break}};e.prototype.handleFormFieldInputWithCallback=function(e,t){var n=t["handleInputChange"]?t["handleInputChange"]:function(e,t){t(e)};var r=this.handleFormFieldInputChange(t.type);n(e,r.bind(this))};e.prototype.getUsername=function(){if(this.user&&this.user.username)return this.user.username;switch(this.usernameAlias){case"username":case"email":return this.userInput;case"phone_number":return C(this.phoneNumber)}};e.prototype.resendConfirmCode=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:if(event){event.preventDefault()}if(!f||typeof f.resendSignUp!=="function"){throw new Error(m)}n.label=1;case 1:n.trys.push([1,3,,4]);e=this.getUsername();if(!e)throw new Error(c.EMPTY_USERNAME);return[4,f.resendSignUp(e.trim())];case 2:n.sent();return[3,4];case 3:t=n.sent();_(t);return[3,4];case 4:return[2]}}))}))};e.prototype.confirmSignUp=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r;return __generator(this,(function(s){switch(s.label){case 0:if(e){e.preventDefault()}if(!f||typeof f.confirmSignUp!=="function"){throw new Error(m)}this.loading=true;s.label=1;case 1:s.trys.push([1,6,7,8]);t=this.getUsername();if(!t)throw new Error(c.EMPTY_USERNAME);t=t.trim();return[4,f.confirmSignUp(t,this.code)];case 2:n=s.sent();if(!n){throw new Error(i.get(c.CONFIRM_SIGN_UP_FAILED))}if(!(this._signUpAttrs&&this._signUpAttrs.password&&this._signUpAttrs.password!==""))return[3,4];return[4,S(t,this._signUpAttrs.password,this.handleAuthStateChange)];case 3:s.sent();return[3,5];case 4:this.handleAuthStateChange(h.SignIn);s.label=5;case 5:return[3,8];case 6:r=s.sent();_(r);return[3,8];case 7:this.loading=false;return[7];case 8:return[2]}}))}))};e.prototype.render=function(){var e=this;return n(r,null,n("amplify-form-section",{headerText:i.get(this.headerText),submitButtonText:i.get(this.submitButtonText),handleSubmit:this.handleSubmit,loading:this.loading,secondaryFooterContent:n("div",null,n("span",null,n("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(h.SignIn)}},i.get(c.BACK_TO_SIGN_IN))))},n("amplify-auth-fields",{formFields:this.newFormFields})))};Object.defineProperty(e,"watchers",{get:function(){return{formFields:["formFieldsHandler"],user:["userHandler"]}},enumerable:false,configurable:true});return e}());var N=new s("ForgotPassword");var P=e("amplify_forgot_password",function(){function e(e){var n=this;t(this,e);this.headerText=c.RESET_YOUR_PASSWORD;this.sendButtonText=c.SEND_CODE;this.submitButtonText=c.SUBMIT;this.formFields=[];this.handleSend=function(e){return n.send(e)};this.handleSubmit=function(e){return n.submit(e)};this.handleAuthStateChange=y;this.usernameAlias="username";this.delivery=null;this.loading=false;this.phoneNumber={countryDialCodeValue:g,phoneNumberValue:null};this.newFormFields=[];this.forgotPasswordAttrs={userInput:"",password:"",code:""}}e.prototype.componentWillLoad=function(){F(this.usernameAlias);this.buildFormFields()};e.prototype.formFieldsHandler=function(){this.buildFormFields()};e.prototype.buildFormFields=function(){var e=this;if(this.formFields.length===0){this.buildDefaultFormFields()}else{var t=[];this.formFields.forEach((function(n){var r=Object.assign({},n);r["handleInputChange"]=function(t){return e.handleFormFieldInputWithCallback(t,n)};t.push(r)}));this.newFormFields=t}};e.prototype.buildDefaultFormFields=function(){switch(this.usernameAlias){case"email":this.newFormFields=[{type:"email",required:true,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"forgot-password-email-input"}}];break;case"phone_number":this.newFormFields=[{type:"phone_number",required:true,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"forgot-password-phone-number-input"}}];break;case"username":default:this.newFormFields=[{type:"username",required:true,handleInputChange:this.handleFormFieldInputChange("username"),inputProps:{"data-test":"forgot-password-username-input"}}];break}};e.prototype.handleFormFieldInputChange=function(e){var t=this;switch(e){case"username":case"email":return function(e){return t.forgotPasswordAttrs.userInput=e.target.value};case"phone_number":return function(e){return v(e,t.phoneNumber)};case"password":case"code":return function(n){return t.forgotPasswordAttrs[e]=n.target.value};default:return}};e.prototype.setFieldValue=function(e,t){switch(e.type){case"username":case"email":if(e.value===undefined){t.userInput=""}else{t.userInput=e.value}break;case"phone_number":if(e.dialCode){this.phoneNumber.countryDialCodeValue=e.dialCode}this.phoneNumber.phoneNumberValue=e.value;break;case"password":case"code":if(e.value===undefined){t[e.type]=""}else{t[e.type]=e.value}break}};e.prototype.handleFormFieldInputWithCallback=function(e,t){var n=t["handleInputChange"]?t["handleInputChange"]:function(e,t){t(e)};var r=this.handleFormFieldInputChange(t.type);n(e,r.bind(this))};e.prototype.send=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(r){switch(r.label){case 0:if(e){e.preventDefault()}if(!f||typeof f.forgotPassword!=="function"){throw new Error(m)}this.loading=true;switch(this.usernameAlias){case"phone_number":try{this.forgotPasswordAttrs.userInput=C(this.phoneNumber)}catch(s){_(s)}break}r.label=1;case 1:r.trys.push([1,3,4,5]);return[4,f.forgotPassword(this.forgotPasswordAttrs.userInput.trim())];case 2:t=r.sent();N.debug(t);this.newFormFields=[{type:"code",required:true,handleInputChange:this.handleFormFieldInputChange("code"),inputProps:{"data-test":"forgot-password-code-input"}},{type:"password",required:true,handleInputChange:this.handleFormFieldInputChange("password"),label:i.get(c.NEW_PASSWORD_LABEL),placeholder:i.get(c.NEW_PASSWORD_PLACEHOLDER)}];this.delivery=t.CodeDeliveryDetails;return[3,5];case 3:n=r.sent();_(n);return[3,5];case 4:this.loading=false;return[7];case 5:return[2]}}))}))};e.prototype.submit=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r,i,s,a;return __generator(this,(function(o){switch(o.label){case 0:if(e){e.preventDefault()}if(!f||typeof f.forgotPasswordSubmit!=="function"){throw new Error(m)}this.loading=true;o.label=1;case 1:o.trys.push([1,3,4,5]);t=this.forgotPasswordAttrs,n=t.userInput,r=t.code,i=t.password;return[4,f.forgotPasswordSubmit(n.trim(),r,i)];case 2:s=o.sent();N.debug(s);this.handleAuthStateChange(h.SignIn);this.delivery=null;return[3,5];case 3:a=o.sent();_(a);return[3,5];case 4:this.loading=false;return[7];case 5:return[2]}}))}))};e.prototype.render=function(){var e=this;var t=this.delivery?function(t){return e.handleSubmit(t)}:function(t){return e.handleSend(t)};var s=this.delivery?this.submitButtonText:this.sendButtonText;return n(r,null,n("amplify-form-section",{headerText:i.get(this.headerText),handleSubmit:t,loading:this.loading,secondaryFooterContent:n("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(h.SignIn)},"data-test":"forgot-password-back-to-sign-in-link"},i.get(c.BACK_TO_SIGN_IN)),testDataPrefix:"forgot-password",submitButtonText:i.get(s)},n("amplify-auth-fields",{formFields:this.newFormFields})))};Object.defineProperty(e,"watchers",{get:function(){return{formFields:["formFieldsHandler"]}},enumerable:false,configurable:true});return e}());var U=new a("amplify-require-new-password");var O=e("amplify_require_new_password",function(){function e(e){var n=this;t(this,e);this.headerText=c.CHANGE_PASSWORD;this.submitButtonText=c.CHANGE_PASSWORD_ACTION;this.handleSubmit=function(e){return n.completeNewPassword(e)};this.handleAuthStateChange=y;this.formFields=[{type:d.Password,required:true,handleInputChange:function(e){return n.handlePasswordChange(e)},label:i.get(c.NEW_PASSWORD_LABEL),placeholder:i.get(c.NEW_PASSWORD_PLACEHOLDER),inputProps:{"data-test":"require-new-password-password-input"}}];this.loading=false;this.requiredAttributes={};this.newFormFields=this.formFields;this.phoneNumber={countryDialCodeValue:g,phoneNumberValue:" "}}e.prototype.userHandler=function(){this.setCurrentUser()};e.prototype.handleRequiredAttributeInputChange=function(e,t){if(e==="phone_number"){this.formatPhoneNumber(t)}else{this.requiredAttributes[e]=t.target.value}};e.prototype.setCurrentUser=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,r;var i=this;return __generator(this,(function(s){switch(s.label){case 0:if(!!this.user)return[3,5];s.label=1;case 1:s.trys.push([1,3,,4]);return[4,f.currentAuthenticatedUser()];case 2:e=s.sent();if(e)this.currentUser=e;return[3,4];case 3:t=s.sent();_(t);return[3,4];case 4:return[3,6];case 5:this.currentUser=this.user;s.label=6;case 6:if(this.currentUser&&this.currentUser.challengeParam&&this.currentUser.challengeParam.requiredAttributes){n=this.currentUser.challengeParam.requiredAttributes;r=A();n.forEach((function(e){var t={type:e,required:true,label:r[e].label,placeholder:r[e].placeholder,handleInputChange:function(t){return i.handleRequiredAttributeInputChange(e,t)},inputProps:{"data-test":"require-new-password-"+e+"-input"}};i.newFormFields=__spreadArrays(i.newFormFields,[t])}))}return[2]}}))}))};e.prototype.componentWillLoad=function(){return this.setCurrentUser()};e.prototype.handlePasswordChange=function(e){this.password=e.target.value};e.prototype.formatPhoneNumber=function(e){v(e,this.phoneNumber);try{if(e.target.name===b&&this.phoneNumber.phoneNumberValue){var t=C(this.phoneNumber);this.requiredAttributes["phone_number"]=t}}catch(n){U.error("error in phone number field - "+n)}};e.prototype.completeNewPassword=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r;return __generator(this,(function(i){switch(i.label){case 0:if(e){e.preventDefault()}if(!f||typeof f.completeNewPassword!=="function"){throw new Error(m)}this.loading=true;i.label=1;case 1:i.trys.push([1,8,9,10]);return[4,f.completeNewPassword(this.currentUser,this.password,this.requiredAttributes)];case 2:t=i.sent();U.debug("complete new password",t);n=t.challengeName;switch(n){case l.SMSMFA:return[3,3];case l.MFASetup:return[3,4]}return[3,5];case 3:this.handleAuthStateChange(h.ConfirmSignIn,t);return[3,7];case 4:U.debug("TOTP setup",t.challengeParam);this.handleAuthStateChange(h.TOTPSetup,t);return[3,7];case 5:return[4,I(t,this.handleAuthStateChange)];case 6:i.sent();i.label=7;case 7:return[3,10];case 8:r=i.sent();_(r);return[3,10];case 9:this.loading=false;return[7];case 10:return[2]}}))}))};e.prototype.render=function(){var e=this;return n(r,null,n("amplify-form-section",{headerText:i.get(this.headerText),handleSubmit:this.handleSubmit,loading:this.loading,secondaryFooterContent:n("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(h.SignIn)}},i.get(c.BACK_TO_SIGN_IN)),submitButtonText:i.get(this.submitButtonText)},n("amplify-auth-fields",{formFields:this.newFormFields})))};Object.defineProperty(e,"watchers",{get:function(){return{user:["userHandler"]}},enumerable:false,configurable:true});return e}());var x=":host{--footer-size:var(--amplify-text-sm);--footer-color:var(--amplify-grey);--footer-font-family:var(--amplify-font-family);--font-weight:var(--amplify-font-weight)}.sign-in-form-footer{font-family:var(--footer-font-family);font-size:var(--footer-size);color:var(--footer-color);font-weight:--font-weight;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.sign-in-form-footer amplify-button{margin-bottom:0.625rem}@media (min-width: 672px){.sign-in-form-footer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:baseline;align-items:baseline}.sign-in-form-footer amplify-button{margin-bottom:0}}.sign-in-form-footer *+*{margin-bottom:15px}.full-width-footer-content{width:100%}";var D=e("amplify_sign_in",function(){function e(e){var n=this;t(this,e);this.handleSubmit=function(e){return n.signIn(e)};this.headerText=c.SIGN_IN_HEADER_TEXT;this.submitButtonText=c.SIGN_IN_ACTION;this.handleAuthStateChange=y;this.usernameAlias="username";this.formFields=[];this.hideSignUp=false;this.newFormFields=[];this.loading=false;this.phoneNumber={countryDialCodeValue:g,phoneNumberValue:null};this.signInAttributes={userInput:"",password:""}}e.prototype.componentWillLoad=function(){F(this.usernameAlias);this.buildFormFields()};e.prototype.formFieldsHandler=function(){this.buildFormFields()};e.prototype.handleFormFieldInputChange=function(e){var t=this;switch(e){case"username":case"email":return function(e){return t.signInAttributes.userInput=e.target.value};case"phone_number":return function(e){return v(e,t.phoneNumber)};case"password":return function(e){return t.signInAttributes.password=e.target.value};default:return function(){}}};e.prototype.handleFormFieldInputWithCallback=function(e,t){var n=t["handleInputChange"]?t["handleInputChange"]:function(e,t){t(e)};var r=this.handleFormFieldInputChange(t.type);n(e,r.bind(this))};e.prototype.signIn=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(e){e.preventDefault()}this.loading=true;switch(this.usernameAlias){case"phone_number":try{this.signInAttributes.userInput=C(this.phoneNumber)}catch(r){_(r)}}t=this.signInAttributes.userInput.trim();return[4,S(t,this.signInAttributes.password,this.handleAuthStateChange,this.usernameAlias)];case 1:n.sent();this.loading=false;return[2]}}))}))};e.prototype.buildDefaultFormFields=function(){var e=this;var t=[];switch(this.usernameAlias){case"email":t.push({type:"email",required:true,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-in-email-input",autocomplete:"username"}});break;case"phone_number":t.push({type:"phone_number",required:true,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-in-phone-number-input",autocomplete:"username"}});break;case"username":default:t.push({type:"username",required:true,handleInputChange:this.handleFormFieldInputChange("username"),inputProps:{"data-test":"sign-in-username-input",autocomplete:"username"}});break}t.push({type:"password",hint:n("div",null,i.get(c.FORGOT_PASSWORD_TEXT)," ",n("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(h.ForgotPassword)},"data-test":"sign-in-forgot-password-link"},i.get(c.RESET_PASSWORD_TEXT))),required:true,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-in-password-input"}});this.newFormFields=__spreadArrays(t)};e.prototype.buildFormFields=function(){var e=this;if(this.formFields.length===0){this.buildDefaultFormFields()}else{var t=[];this.formFields.forEach((function(r){var s=Object.assign({},r);if(s.type==="password"){s["hint"]=w(s)?n("div",null,i.get(c.FORGOT_PASSWORD_TEXT)," ",n("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(h.ForgotPassword)},"data-test":"sign-in-forgot-password-link"},i.get(c.RESET_PASSWORD_TEXT))):s["hint"]}s["handleInputChange"]=function(t){return e.handleFormFieldInputWithCallback(t,r)};e.setFieldValue(s,e.signInAttributes);t.push(s)}));this.newFormFields=t}};e.prototype.setFieldValue=function(e,t){switch(e.type){case"username":case"email":if(e.value===undefined){t.userInput=""}else{t.userInput=e.value}break;case"phone_number":if(e.dialCode){this.phoneNumber.countryDialCodeValue=e.dialCode}this.phoneNumber.phoneNumberValue=e.value;break;case"password":if(e.value===undefined){t.password=""}else{t.password=e.value}break}};e.prototype.render=function(){var e=this;return n(r,null,n("amplify-form-section",{headerText:i.get(this.headerText),handleSubmit:this.handleSubmit,testDataPrefix:"sign-in"},n("div",{slot:"subtitle"},n("slot",{name:"header-subtitle"})),n("slot",{name:"federated-buttons"},n("amplify-federated-buttons",{handleAuthStateChange:this.handleAuthStateChange,federated:this.federated})),!o(this.federated)&&n("amplify-strike",null,"or"),n("amplify-auth-fields",{formFields:this.newFormFields}),n("div",{slot:"amplify-form-section-footer",class:"sign-in-form-footer"},n("slot",{name:"footer"},!this.hideSignUp&&n("slot",{name:"secondary-footer-content"},n("span",null,i.get(c.NO_ACCOUNT_TEXT)," ",n("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(h.SignUp)},"data-test":"sign-in-create-account-link"},i.get(c.CREATE_ACCOUNT_TEXT)))),n("div",{class:this.hideSignUp?"full-width-footer-content":""},n("slot",{name:"primary-footer-content"},n("amplify-button",{type:"submit",disabled:this.loading,"data-test":"sign-in-sign-in-button"},this.loading?n("amplify-loading-spinner",null):n("span",null,i.get(this.submitButtonText)))))))))};Object.defineProperty(e,"watchers",{get:function(){return{formFields:["formFieldsHandler"]}},enumerable:false,configurable:true});return e}());D.style=x;var R="amplify-sign-up{--footer-font-family:var(--amplify-font-family);--footer-font-size:var(--amplify-text-sm);--footer-color:var(--amplify-grey);--font-weight:var(--amplify-font-weight)}.sign-up-form-footer{font-family:var(--footer-font-family);font-size:var(--footer-font-size);color:var(--footer-color);font-weight:--font-weight;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.sign-up-form-footer amplify-button{margin-bottom:0.625rem}@media (min-width: 672px){.sign-up-form-footer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:baseline;align-items:baseline}.sign-up-form-footer amplify-button{margin-bottom:0}}.sign-up-form-footer *+*{margin-bottom:15px}";var k=e("amplify_sign_up",function(){function e(e){var n=this;t(this,e);this.handleSubmit=function(e){return n.signUp(e)};this.handleSignUp=function(e){return n.authSignUp(e)};this.headerText=c.SIGN_UP_HEADER_TEXT;this.submitButtonText=c.SIGN_UP_SUBMIT_BUTTON_TEXT;this.haveAccountText=c.SIGN_UP_HAVE_ACCOUNT_TEXT;this.signInText=c.SIGN_IN_TEXT;this.formFields=[];this.handleAuthStateChange=y;this.usernameAlias="username";this.newFormFields=[];this.phoneNumber={countryDialCodeValue:g,phoneNumberValue:null};this.loading=false;this.signUpAttributes={username:"",password:"",attributes:{}}}e.prototype.handleFormFieldInputChange=function(e){var t=this;switch(e){case"username":return function(e){return t.signUpAttributes.username=e.target.value};case"password":return function(e){return t.signUpAttributes.password=e.target.value};case"email":return function(e){return t.signUpAttributes.attributes.email=e.target.value};case"phone_number":return function(e){return v(e,t.phoneNumber)};default:return function(n){return t.signUpAttributes.attributes[e]=n.target.value}}};e.prototype.handleFormFieldInputWithCallback=function(e,t){var n=t["handleInputChange"]?t["handleInputChange"]:function(e,t){t(e)};var r=this.handleFormFieldInputChange(t.type);n(e,r.bind(this))};e.prototype.authSignUp=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,f.signUp(e)];case 1:t=n.sent();if(!t){throw new Error(c.SIGN_UP_FAILED)}return[2,t]}}))}))};e.prototype.assignPhoneNumberToSignUpAttributes=function(){if(this.phoneNumber.phoneNumberValue){try{this.signUpAttributes.attributes.phone_number=C(this.phoneNumber)}catch(e){_(e)}}};e.prototype.assignUserNameAliasToSignUpAttributes=function(){switch(this.usernameAlias){case"email":case"phone_number":this.signUpAttributes.username=this.signUpAttributes.attributes[this.usernameAlias];break}};e.prototype.assignFormInputToSignUpAttributes=function(){this.assignPhoneNumberToSignUpAttributes();this.assignUserNameAliasToSignUpAttributes()};e.prototype.validateSignUpAttributes=function(){if(!this.signUpAttributes.username){if(this.usernameAlias===p.email){throw new Error(c.EMPTY_EMAIL)}else if(this.usernameAlias===p.phone_number){throw new Error(c.EMPTY_PHONE)}else{throw new Error(c.EMPTY_USERNAME)}}if(this.signUpAttributes.username.indexOf(" ")>=0){throw new Error(c.USERNAME_REMOVE_WHITESPACE)}if(this.signUpAttributes.password!==this.signUpAttributes.password.trim()){throw new Error(c.PASSWORD_REMOVE_WHITESPACE)}};e.prototype.signUp=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r;return __generator(this,(function(i){switch(i.label){case 0:if(e){e.preventDefault()}if(!f||typeof f.signUp!=="function"){throw new Error(m)}this.loading=true;this.assignFormInputToSignUpAttributes();i.label=1;case 1:i.trys.push([1,6,7,8]);this.validateSignUpAttributes();return[4,this.handleSignUp(this.signUpAttributes)];case 2:t=i.sent();if(!t.userConfirmed)return[3,4];return[4,S(this.signUpAttributes.username,this.signUpAttributes.password,this.handleAuthStateChange)];case 3:i.sent();return[3,5];case 4:n=Object.assign({},this.signUpAttributes);this.handleAuthStateChange(h.ConfirmSignUp,Object.assign(Object.assign({},t.user),{signUpAttrs:n}));i.label=5;case 5:return[3,8];case 6:r=i.sent();_(r);return[3,8];case 7:this.loading=false;return[7];case 8:return[2]}}))}))};e.prototype.buildDefaultFormFields=function(){switch(this.usernameAlias){case"email":this.newFormFields=[{type:"email",placeholder:i.get(c.SIGN_UP_EMAIL_PLACEHOLDER),required:true,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input",autocomplete:"username"}},{type:"password",placeholder:i.get(c.SIGN_UP_PASSWORD_PLACEHOLDER),required:true,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input",autocomplete:"new-password"}},{type:"phone_number",required:true,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input",autocomplete:"tel-national"}}];break;case"phone_number":this.newFormFields=[{type:"phone_number",required:true,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input",autocomplete:"username"}},{type:"password",placeholder:i.get(c.SIGN_UP_PASSWORD_PLACEHOLDER),required:true,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input",autocomplete:"new-password"}},{type:"email",placeholder:i.get(c.SIGN_UP_EMAIL_PLACEHOLDER),required:true,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input",autocomplete:"email"}}];break;case"username":default:this.newFormFields=[{type:"username",placeholder:i.get(c.SIGN_UP_USERNAME_PLACEHOLDER),required:true,handleInputChange:this.handleFormFieldInputChange("username"),inputProps:{"data-test":"sign-up-username-input",autocomplete:"username"}},{type:"password",placeholder:i.get(c.SIGN_UP_PASSWORD_PLACEHOLDER),required:true,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input",autocomplete:"new-password"}},{type:"email",placeholder:i.get(c.SIGN_UP_EMAIL_PLACEHOLDER),required:true,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input"}},{type:"phone_number",required:true,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input"}}];break}};e.prototype.buildFormFields=function(){var e=this;if(this.formFields.length===0){this.buildDefaultFormFields()}else{var t=[];this.formFields.forEach((function(n){var r=Object.assign({},n);r["handleInputChange"]=function(t){return e.handleFormFieldInputWithCallback(t,n)};e.setFieldValue(n,e.signUpAttributes);t.push(r)}));this.newFormFields=t}};e.prototype.setFieldValue=function(e,t){switch(e.type){case"username":if(e.value===undefined){t.username=""}else{t.username=e.value}break;case"password":if(e.value===undefined){t.password=""}else{t.password=e.value}break;case"email":t.attributes.email=e.value;break;case"phone_number":if(e.dialCode){this.phoneNumber.countryDialCodeValue=e.dialCode}this.phoneNumber.phoneNumberValue=e.value;break;default:t.attributes[e.type]=e.value;break}};e.prototype.componentWillLoad=function(){F(this.usernameAlias);this.buildFormFields()};e.prototype.formFieldsHandler=function(){this.buildFormFields()};e.prototype.render=function(){var e=this;return n(r,null,n("amplify-form-section",{headerText:i.get(this.headerText),handleSubmit:this.handleSubmit,testDataPrefix:"sign-up"},n("div",{slot:"subtitle"},n("slot",{name:"header-subtitle"})),n("amplify-auth-fields",{formFields:this.newFormFields}),n("div",{class:"sign-up-form-footer",slot:"amplify-form-section-footer"},n("slot",{name:"footer"},n("slot",{name:"secondary-footer-content"},n("span",null,i.get(this.haveAccountText)," ",n("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(h.SignIn)},"data-test":"sign-up-sign-in-link"},i.get(this.signInText)))),n("slot",{name:"primary-footer-content"},n("amplify-button",{type:"submit","data-test":"sign-up-create-account-button",disabled:this.loading},this.loading?n("amplify-loading-spinner",null):n("span",null,i.get(this.submitButtonText))))))))};Object.defineProperty(e,"watchers",{get:function(){return{formFields:["formFieldsHandler"]}},enumerable:false,configurable:true});return e}());k.style=R;var L=new s("AmplifyVerifyContact");var M=e("amplify_verify_contact",function(){function e(e){t(this,e);this.handleAuthStateChange=y;this.loading=false}e.prototype.handleSubmit=function(e){e.preventDefault();this.verifyAttr?this.submit(this.code):this.verify(this.contact)};e.prototype.submit=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r;return __generator(this,(function(i){switch(i.label){case 0:t=this.verifyAttr;if(!f||typeof f.verifyCurrentUserAttributeSubmit!=="function"){throw new Error(m)}this.loading=true;i.label=1;case 1:i.trys.push([1,3,4,5]);return[4,f.verifyCurrentUserAttributeSubmit(t,e)];case 2:n=i.sent();L.debug(n);this.handleAuthStateChange(h.SignedIn,this.user);this.verifyAttr=null;return[3,5];case 3:r=i.sent();_(r);L.error(r);return[3,5];case 4:this.loading=false;return[7];case 5:return[2]}}))}))};e.prototype.verify=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(r){switch(r.label){case 0:if(!e){L.error("Neither Email nor Phone Number selected");return[2]}if(!f||typeof f.verifyCurrentUserAttribute!=="function"){throw new Error(m)}this.loading=true;r.label=1;case 1:r.trys.push([1,3,4,5]);return[4,f.verifyCurrentUserAttribute(e)];case 2:t=r.sent();L.debug(t);this.verifyAttr=e;return[3,5];case 3:n=r.sent();_(n);L.error(n);return[3,5];case 4:this.loading=false;return[7];case 5:return[2]}}))}))};e.prototype.handleInputChange=function(e){var t=e.target.name;if(t==="code"){this.code=e.target.value}else if(t==="contact"){this.contact=e.target.value}};e.prototype.renderSubmit=function(){var e=this;return n("div",null,n("amplify-input",{inputProps:{autocomplete:"off","data-test":"verify-contact-code-input"},name:"code",placeholder:i.get(c.CODE_PLACEHOLDER),handleInputChange:function(t){return e.handleInputChange(t)}}))};e.prototype.renderVerify=function(){var e=this;var t=this.user;if(!t){L.debug("No user to verify");return null}var r=t.unverified;if(!r){L.debug("Unverified variable does not exist on user");return null}var s=r.email,a=r.phone_number;return n("div",null,s&&n("amplify-radio-button",{label:i.get(c.VERIFY_CONTACT_EMAIL_LABEL),key:"email",name:"contact",value:"email",handleInputChange:function(t){return e.handleInputChange(t)},inputProps:{"data-test":"verify-contact-email-radio"}}),a&&n("amplify-radio-button",{label:i.get(c.VERIFY_CONTACT_PHONE_LABEL),key:"phone_number",name:"contact",value:"phone_number",handleInputChange:function(t){return e.handleInputChange(t)},inputProps:{"data-test":"verify-contact-phone-number-radio"}}))};e.prototype.render=function(){var e=this;return n(r,null,n("amplify-form-section",{handleSubmit:function(t){return e.handleSubmit(t)},headerText:i.get(c.VERIFY_CONTACT_HEADER_TEXT),loading:this.loading,secondaryFooterContent:n("span",null,n("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(h.SignedIn,e.user)},"data-test":"verify-contact-skip-link"},"Skip")),submitButtonText:this.verifyAttr?i.get(c.VERIFY_CONTACT_SUBMIT_LABEL):i.get(c.VERIFY_CONTACT_VERIFY_LABEL)},this.verifyAttr?this.renderSubmit():this.renderVerify()))};return e}())}}}));