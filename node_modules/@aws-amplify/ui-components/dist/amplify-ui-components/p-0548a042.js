import{d as t}from"./p-900152ca.js";import{Storage as e}from"@aws-amplify/storage";const r=new Set(["apng","bmp","gif","ico","cur","jpg","jpeg","jfif","pjpeg","pjp","png","svg","tif","tiff","webp"]),o=(t,e)=>{const{name:r,size:o,type:a}=t;let n=encodeURI(r);return e&&(n="string"==typeof e?e:"function"==typeof e?e({name:r,size:o,type:a}):encodeURI(JSON.stringify(e)),n||(n="empty_key")),n.replace(/\s/g,"_")},a=async(r,o,a,n,i)=>{if(!e||"function"!=typeof e.get)throw new Error(t);try{const t=await e.get(r,{level:o,track:a,identityId:n});return i.debug("Storage image get",t),t}catch(c){throw new Error(c)}},n=async(r,o,a,n,i)=>{if(!e||"function"!=typeof e.get)throw new Error(t);try{const t=await e.get(r,{download:!0,level:o,track:a,identityId:n});return i.debug(t),await(c=t.Body,new Promise((t,e)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=()=>{e("Failed to read file!"),r.abort()},r.readAsText(c)}))}catch(p){throw new Error(p)}var c},i=async(r,o,a,n,i,c)=>{if(!e||"function"!=typeof e.put)throw new Error(t);try{const t=await e.put(r,o,{contentType:i,level:a,track:n});c.debug("Upload data",t)}catch(p){throw new Error(p)}};export{n as a,o as c,a as g,r as i,i as p}